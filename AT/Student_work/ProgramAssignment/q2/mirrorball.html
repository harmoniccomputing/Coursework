<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Minimal Lindenmayer usage</title>

</head>

<body>

  <h1>I'm a mirror ball (9 iterations)</h1>
  <canvas id="canvas" width="900" height="800"></canvas>
  <label for="textresult">string result:</label>
  <textarea id="textresult" rows="40" cols="80"></textarea>

  <script src="lindenmayer.js"></script>
  <script type="text/javascript">


    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext("2d");
    var textresult = document.getElementById('textresult');
    var iterations = 9;

    // translate so that ball is in center
    // also rotate
    ctx.translate(canvas.width / 2, canvas.height / 1.5);
    ctx.rotate(Math.PI);
    ctx.scale(2, 2)

    var ball = new LSystem({
      axiom: 'G',
      productions: {
        'G': 'X-G-X',
        'X': 'G+Y+G',
        'Y': '[+F]F[-F]'

      },
      finals: {
        'F': () => {
          ctx.beginPath()
          ctx.moveTo(0, 0)
          ctx.lineTo(0, 25 / (ball.iterations + 1))
          ctx.stroke()
          ctx.translate(0, 25 / (ball.iterations + 1))
        },
        'G': () => {
          ctx.translate(0, 25 / (ball.iterations + 1)); // Move forward without drawing
        },
        '+': () => { ctx.rotate((Math.PI / 180) * 30) },
        '-': () => { ctx.rotate((Math.PI / 180) * -30) },
        '[': () => { ctx.save() },
        ']': () => { ctx.restore() }
      }
      
    });
    ball.iterate(iterations);
    textresult.value = ball.getString();
    ball.final();
  </script>
</body>

</html>